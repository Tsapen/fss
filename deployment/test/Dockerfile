FROM golang:latest

ARG FSS_ROOT_DIR
ARG FSS_CONFIG
ARG FSS_MIGRATIONS_PATH

ENV FSS_ROOT_DIR=/app
ENV FSS_CONFIG=${FSS_TEST_CONFIG}
ENV FSS_MIGRATIONS_PATH=${FSS_TEST_MIGRATIONS_PATH}

WORKDIR /app

COPY . .

RUN go build -o fss ./cmd/fss/main.go

CMD ["./fss"]
